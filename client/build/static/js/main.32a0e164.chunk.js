(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{76:function(e,t,a){e.exports=a(88)},81:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a.n(c),o=(a(81),a(7)),i=(a(82),a(14)),u=a(15),s=a(11),m=a(6),p=a.n(m),d=a(9);function b(){}var f=Object(n.createContext)({token:null,userId:null,login:b,logout:b,isAuthenticated:!1}),E=function(){return Object(n.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[])},g=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(o.a)(c,2),i=l[0],u=l[1],s=E();return{loading:a,request:Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,c,l,o,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,c=i.length>3&&void 0!==i[3]?i[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),c["Content-Type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:c});case 8:return l=e.sent,e.next=11,l.json();case 11:if(o=e.sent,l.ok){e.next=16;break}throw console.log("Http Hook:",o.message),s("Http Hook: ".concat(o.message.message)),new Error(o.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 16:return r(!1),e.abrupt("return",o);case 20:throw e.prev=20,e.t0=e.catch(4),r(!1),u(e.t0.message),e.t0;case 25:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(n.useCallback)((function(){return u(null)}),[])}},v=a(120),h=a(122),O=a(123),x=a(124),j=a(136),k=a(140),y=a(128),C=a(118);function w(){return r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",zIndex:"2"}},r.a.createElement("h2",null,"Loading..."))}var S=Object(C.a)({formControl:{minWidth:700},amountField:{marginTop:14},sublimeButton:{marginTop:10,background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 30px"},card:{marginTop:14},title:{marginTop:14,textAlign:"center",fontSize:45}}),N=function(){var e=S(),t=function(){var e=Object(n.useContext)(f).token,t=E(),a=Object(n.useState)({product:null,amount:0}),r=Object(o.a)(a,2),c=r[0],l=r[1],i=Object(n.useState)([]),u=Object(o.a)(i,2),m=u[0],b=u[1],v=Object(n.useState)(),h=Object(o.a)(v,2),O=h[0],x=(h[1],g()),j=x.loading,k=(x.error,x.request),y=(x.clearError,Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("api/products");case 3:t=e.sent,b(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR -> Load Products: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[k])),C=function(){var a=Object(d.a)(p.a.mark((function a(){var n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n="Bearer ".concat(e),a.next=4,k("api/goods","POST",c,{Authorization:n});case 4:t("\u0422\u043e\u0432\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d!"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("ERROR -> Create Good: ",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}();return{products:m,fetchProducts:y,bindSelect:{value:O,onChange:function(e){l(Object(s.a)(Object(s.a)({},c),{},{product:e.target.value}))}},bindAmount:{value:c.amount,onChange:function(e){l(Object(s.a)(Object(s.a)({},c),{},{amount:parseInt(e.target.value)}))}},good:c,createHandler:C,loading:j}}(),a=t.products,c=t.fetchProducts,l=t.bindSelect,i=t.bindAmount,u=t.good,m=t.createHandler,b=t.loading;if(Object(n.useEffect)((function(){c()}),[c]),b)return r.a.createElement(w,null);var C=a.map((function(e){return r.a.createElement(v.a,{value:e._id,key:e._id},e.title)}));return r.a.createElement("div",null,r.a.createElement(h.a,{className:e.card},r.a.createElement(O.a,{container:!0,spacing:3,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement("div",{className:e.title},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430")),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(x.a,{className:e.formControl},r.a.createElement(j.a,l,C),r.a.createElement(k.a,Object.assign({className:e.amountField},i,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430 \u0432 \u0442\u043e\u0432\u0430\u0440\u0435",type:"number"})),r.a.createElement(y.a,{className:e.sublimeButton,onClick:m},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement("pre",null,JSON.stringify(u,null,2))))))},T=a(26),P=a(129),B=a(130),I=Object(C.a)({authCard:{marginTop:34},title:{fontSize:43,textAlign:"center"}}),F=function(){var e=I(),t=Object(n.useContext)(f),a=E(),c=g(),l=c.loading,i=c.error,u=c.request,m=c.clearError,b=Object(n.useState)({email:"",password:""}),v=Object(o.a)(b,2),x=v[0],j=v[1];Object(n.useEffect)((function(){a(i),m()}),[i,a,m]);var C=function(e){j(Object(s.a)(Object(s.a)({},x),{},Object(T.a)({},e.target.name,e.target.value)))},S=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("/api/auth/register/","POST",Object(s.a)({},x));case 3:t=e.sent,a(t.message),console.log("Register Data:",t),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("/api/auth/login/","POST",Object(s.a)({},x));case 3:a=e.sent,t.login(a.token,a.userId),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Login Handler:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return l?r.a.createElement(w,null):r.a.createElement(O.a,{container:!0,justify:"center",xs:12},r.a.createElement(O.a,{item:!0,xs:4},r.a.createElement(h.a,{className:e.authCard},r.a.createElement(P.a,null,r.a.createElement("div",{className:e.title},"SHOP LIST"),r.a.createElement(k.a,{fullWidth:!0,label:"Email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",type:"text",name:"email",onChange:C}),r.a.createElement(k.a,{fullWidth:!0,label:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",onChange:C}),r.a.createElement(B.a,null,r.a.createElement(y.a,{variant:"outlined",disabled:l,style:{marginRight:10},onClick:N},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(y.a,{variant:"outlined",disabled:l,onClick:S},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))))},A=a(137),z=a(53),_=Object(C.a)({card:{minWidth:275,marginTop:9},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:16},pos:{marginTop:12}}),R=function(e){var t=e.product,a=_();return r.a.createElement(h.a,{className:a.card},r.a.createElement(i.b,{to:"/product/".concat(t._id)},r.a.createElement(P.a,null,r.a.createElement("div",{className:a.title},t.title),r.a.createElement(z.a,null,"\u0415\u0434\u0438\u043d\u0438\u0446\u044b \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f: ",t.unitOfMeasure),r.a.createElement(z.a,{className:a.title},"\u041c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c: ",t.multiplicity))))},W=function(){var e=g(),t=e.loading,a=(e.error,e.request),c=(e.clearError,E()),l=Object(n.useState)([]),i=Object(o.a)(l,2),u=i[0],s=i[1],m=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("api/products");case 3:t=e.sent,c("\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"),s(t),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[a,c]);if(Object(n.useEffect)((function(){m()}),[m]),t)return r.a.createElement(w,null);var b=u.map((function(e){return r.a.createElement(R,{key:e._id,product:e})}));return r.a.createElement("div",null,r.a.createElement("h1",null,"\u0421\u043f\u0438\u0441\u043e\u043a c\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432"),r.a.createElement(A.a,null,b))},G=function(){E();var e=Object(u.h)().id,t=function(e){var t=Object(n.useState)(e),a=Object(o.a)(t,2),r=a[0],c=a[1],l=g(),i=l.loading,u=(l.error,l.request),m=(l.clearError,Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("/api/products/".concat(t));case 3:a=e.sent,c(a),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[u]));return{product:r,loadProduct:m,onChange:function(e){var t=e.target,a=t.name,n=t.value;c(Object(s.a)(Object(s.a)({},r),{},Object(T.a)({},a,n)))},patchProduct:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Patch Product"),e.prev=1,e.next=4,u("/api/products/".concat(t),"POST",r);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),loading:i}}(),a=t.product,c=t.loadProduct,l=t.onChange,i=t.patchProduct,m=t.loading;return Object(n.useEffect)((function(){c(e)}),[c]),m?r.a.createElement(w,null):r.a.createElement("div",null,r.a.createElement("h1",null,"Product Detail"),r.a.createElement("div",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",r.a.createElement("input",{type:"text",name:"title",value:a.title,onChange:l})),r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"center"}},"\u0415\u0434\u0438\u043d\u0438\u0446\u044b \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f: "),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"unitOfMeasure",value:a.unitOfMeasure,onChange:l}))),r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"center"}},"\u041a\u0440\u0430\u0442\u043d\u043e\u0441\u0442\u044c "),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"multiplicity",value:a.multiplicity,onChange:l}))),r.a.createElement("div",null,r.a.createElement("button",{className:"btn",onClick:function(){return i(e)}},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")),r.a.createElement("pre",null,JSON.stringify(a,null,2)))},H=a(127),D=a(90);var q=r.a.createContext({basketId:null,setBasketId:function(){}}),J=Object(C.a)({card:{minWidth:700,marginTop:9},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginTop:12}}),M=function(e){var t=e.basket,a=J(),c=Object(n.useContext)(q).setBasketId;return r.a.createElement(D.a,{key:t._id},r.a.createElement(h.a,{className:a.card},r.a.createElement(P.a,null,r.a.createElement(i.b,{to:"/basket/".concat(t._id)},t.title," ID: ",t._id),r.a.createElement(B.a,{className:a.pos},r.a.createElement(y.a,{variant:"outlined",onClick:function(){return c(t._id)}},"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u043a\u043e\u0440\u0437\u0438\u043d\u0443")))))},L=function(){var e=g(),t=e.loading,a=(e.error,e.request),c=(e.clearError,Object(n.useContext)(f).token),l=E(),i=Object(n.useState)([]),u=Object(o.a)(i,2),s=u[0],m=u[1],b=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="Bearer ".concat(c),console.log("Auth Str:",t),e.next=5,a("api/baskets","GET",null,{Authorization:t});case 5:n=e.sent,l("\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u0440\u0437\u0438\u043d \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"),console.log("Data:",n),m(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Basket Page -> errors:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[a,c,l]);if(Object(n.useEffect)((function(){b()}),[b]),t)return r.a.createElement(w,null);var v=s.map((function(e){return r.a.createElement(M,{key:e._id,basket:e})}));return r.a.createElement("div",null,r.a.createElement("h1",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u0440\u0437\u0438\u043d"),r.a.createElement(H.a,null,v))},V=function(){var e=Object(n.useState)({title:"",purchases:[],total:0}),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useContext)(f).token,l=E(),i=Object(n.useContext)(q).basketId,u=g(),m=u.loading,b=(u.error,u.request),v=(u.clearError,(null===a||void 0===a?void 0:a.title)?a.title:null),h=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("/api/baskets/".concat(t));case 3:a=e.sent,r(a),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[b]),O=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Patch Basket:",a),e.prev=1,e.next=4,b("/api/baskets/".concat(t),"POST",a);case 4:l("\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430!"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Add Good",a.purchases.concat(t)),n={good:t},e.prev=2,e.next=5,b("/api/baskets/".concat(i,"/addGood"),"POST",n);case 5:l("\u0422\u043e\u0432\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443!"),h(i),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Add Preset Goods:",t),e.prev=1,e.next=4,b("/api/baskets/".concat(i,"/addPreset"),"POST",t);case 4:l("\u041f\u0440\u0435\u0441\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443!"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Create Basket"),e.prev=1,t="Bearer ".concat(c),e.next=5,b("/api/baskets/","POST",a,{Authorization:t});case 5:l("\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430!"),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useCallback)((function(){console.log("Here"),O(i)}),[a.goods]),{basket:a,loadBasket:h,onChange:function(e){var t=e.target,n=t.name,c=t.value;r(Object(s.a)(Object(s.a)({},a),{},Object(T.a)({},n,c)))},patchBasket:O,loading:m,currentBasket:v,addGood:x,addPresetGoods:j,bindTitle:{value:a.title,onChange:function(e){r(Object(s.a)(Object(s.a)({},a),{},{title:e.target.value}))}},createBasket:k}},X=Object(C.a)({card:{minWidth:275,marginTop:9},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginTop:12}}),$=function(e){var t=e.good,a=e.isGoodInBasket,n=e.addToBasket,c=e.children,l=X();function o(){return a?r.a.createElement(y.a,null,"\u0422\u043e\u0432\u0430\u0440 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"):r.a.createElement(y.a,{variant:"outlined",color:"primary",onClick:function(){return n(t._id)}},"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")}return r.a.createElement(h.a,{className:l.card},r.a.createElement(P.a,null,r.a.createElement("span",{className:l.title},t.product.title," ",t._id),r.a.createElement("div",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",t.amount," ",t.product.unitOfMeasure),r.a.createElement(B.a,{className:l.pos},r.a.createElement(y.a,{variant:"outlined"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(o,null)),c))},K="#76ff03",Q="#00b0ff",U=Object(C.a)({card:{minWidth:300,marginTop:9},box:{display:"flex"},multiplier:{marginLeft:14,fontSize:34}}),Y=function(e){var t=e.inPurchase,a=U(),c=function(e){var t=Object(n.useState)(e),a=Object(o.a)(t,2),r=a[0],c=a[1],l=g(),i=l.loading,u=(l.error,l.request,l.clearError,Object(n.useState)(Q)),m=Object(o.a)(u,2),p=m[0],d=m[1];Object(n.useMemo)((function(){r.buy?d(K):d(Q)}),[r]);return{purchase:r,bgColor:p,buyHandler:function(){c(Object(s.a)(Object(s.a)({},r),{},{buy:!r.buy}))},loading:i}}(t),l=c.purchase,i=c.bgColor,u=c.buyHandler;return r.a.createElement(h.a,{className:a.card},r.a.createElement(P.a,{style:{backgroundColor:i}},r.a.createElement(A.a,{className:a.box},r.a.createElement($,{good:l.good}),r.a.createElement("div",{className:a.multiplier}," X ",l.things),r.a.createElement(y.a,{variant:"outlined",onClick:u},l.buy?"\u041a\u0443\u043f\u043b\u0435\u043d\u043e!":"\u041a\u0443\u043f\u0438\u0442\u044c!"))))},Z=function(){E();var e,t=Object(u.h)().id,a=V(),c=a.basket,l=a.loadBasket,o=a.onChange,i=a.patchBasket,s=a.loading;if(Object(n.useEffect)((function(){l(t)}),[l,t]),s)return r.a.createElement(w,null);var m=null===(e=c.purchases)||void 0===e?void 0:e.map((function(e){return r.a.createElement(A.a,{key:e._id},r.a.createElement(Y,{inPurchase:e},r.a.createElement(y.a,{variant:"outlined"},"\u041a\u0443\u043f\u0438\u0442\u044c")))}));return r.a.createElement("div",null,r.a.createElement("h1",null,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"),r.a.createElement("div",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",r.a.createElement("input",{type:"text",name:"title",value:c.title,onChange:o})),r.a.createElement("div",null,r.a.createElement(y.a,{variant:"outlined",color:"secondary",onClick:function(){return i(t)}},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")),r.a.createElement(A.a,null,m),r.a.createElement("pre",null,JSON.stringify(c,null,2)))},ee=Object(C.a)({box:{marginTop:9,width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"start"},card:{marginLeft:7,marginRight:7,minWidth:320},updateButton:{marginTop:14,marginLeft:7},title:{fontSize:48,marginTop:14,marginLeft:7},pre:{marginLeft:7},pos:{marginTop:12}}),te=function(){var e=ee(),t=g(),a=t.loading,c=(t.error,t.request),l=(t.clearError,Object(n.useContext)(f).token),i=E(),u=Object(n.useState)([]),s=Object(o.a)(u,2),m=s[0],b=s[1],v=Object(n.useContext)(q).basketId,h=V(),O=h.basket,x=h.loadBasket,j=h.addGood,k=h.patchBasket;Object(n.useEffect)((function(){x(v)}),[x,v]);var C=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="Bearer ".concat(l),console.log("Auth Str:",t),e.next=5,c("api/goods","GET",null,{Authorization:t});case 5:a=e.sent,i("\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"),console.log("Data:",a),b(a),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])}))),[c,i]);if(Object(n.useEffect)((function(){C()}),[C]),a)return r.a.createElement(w,null);var S=m.map((function(t){var a;return r.a.createElement(A.a,{className:e.card,key:t._id},r.a.createElement($,{good:t,isGoodInBasket:null===(a=O.purchases)||void 0===a?void 0:a.includes(t._id),addToBasket:j}))}));return r.a.createElement("div",null,r.a.createElement("div",{className:e.title},"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),r.a.createElement(A.a,{className:e.box},S),r.a.createElement(y.a,{className:e.updateButton,variant:"outlined",color:"primary",onClick:function(){return k(v)}},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),r.a.createElement("pre",{className:e.pre},JSON.stringify(O,null,2)))},ae=Object(C.a)({formControl:{minWidth:700},amountField:{marginTop:14},sublimeButton:{marginTop:10,background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 30px"},title:{textAlign:"center",fontSize:45},card:{marginTop:14}}),ne=function(){var e=ae(),t=function(){var e=E(),t=Object(n.useState)({title:"",unitOfMeasure:void 0,multiplicity:1}),a=Object(o.a)(t,2),r=a[0],c=a[1],l=g(),i=l.loading,u=(l.error,l.request);l.clearError;return{product:r,onChange:function(e){var t=e.target,a=t.name,n=t.value;c(Object(s.a)(Object(s.a)({},r),{},Object(T.a)({},a,n)))},createHandler:function(){var t=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u("api/products","POST",r);case 3:e("\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d!"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("ERROR -> Create Product: ",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),loading:i}}(),a=t.product,c=t.onChange,l=t.createHandler;return t.loading?r.a.createElement(w,null):r.a.createElement("div",null,r.a.createElement(h.a,{className:e.card},r.a.createElement(O.a,{container:!0,spacing:3,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement("div",{className:e.title},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430")),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(x.a,{className:e.formControl},r.a.createElement(k.a,{className:e.amountField,value:a.title,onChange:c,name:"title",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430",type:"text"}),r.a.createElement(k.a,{className:e.amountField,value:a.unitOfMeasure,onChange:c,name:"unitOfMeasure",label:"\u0415\u0434\u0438\u043d\u0438\u0446\u044b \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f",type:"text"}),r.a.createElement(k.a,{className:e.amountField,value:a.multiplicity,onChange:c,name:"multiplicity",label:"\u041c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c",type:"number"}),r.a.createElement(y.a,{className:e.sublimeButton,onClick:l},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement("pre",null,JSON.stringify(a,null,2))))))},re=Object(C.a)({box:{marginTop:9,width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"start"},listItem:{marginLeft:7,marginRight:7,marginTop:7,height:72,backgroundColor:"#545454",display:"flex",justifyContent:"space-between"},title:{fontSize:25}}),ce=function(){var e=re(),t=g(),a=t.loading,c=t.request,l=E(),u=Object(n.useState)([]),s=Object(o.a)(u,2),m=s[0],b=s[1],v=Object(n.useContext)(f).token,h=Object(n.useContext)(q).basketId,O=V().addPresetGoods,x=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="Bearer ".concat(v),e.next=4,c("api/presets","GET",null,{Authorization:t});case 4:a=e.sent,l("\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u0441\u0435\u0442\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"),b(a),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])}))),[c,l]);Object(n.useEffect)((function(){x()}),[]);var j=m.map((function(t){return r.a.createElement(D.a,{key:t._id,className:e.listItem},r.a.createElement(i.b,{to:"/preset/".concat(t._id),className:e.title},t.title),h&&r.a.createElement(y.a,{variant:"outlined",color:"secondary",onClick:function(){return O(t.purchases)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))}));return a?r.a.createElement(w,null):r.a.createElement("div",null,r.a.createElement("h1",null,"Presets Page"),r.a.createElement(H.a,null,j),r.a.createElement("pre",null,JSON.stringify(m,null,2)))},le=function(){var e=Object(n.useState)({title:"",purchases:[],owner:null}),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useContext)(f),l=c.userId,i=c.token,u=E(),m=g(),b=m.loading,v=(m.error,m.request),h=(m.clearError,Object(n.useState)([])),O=Object(o.a)(h,2),x=(O[0],O[1],Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("/api/presets/".concat(t));case 3:a=e.sent,r(a),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[v])),j=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Patch Preset"),e.prev=1,e.next=4,v("/api/presets/".concat(t),"POST",a);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Patch pontenshialPurchases"),n=a.map((function(e){return{good:e,things:1,buy:!1}})),e.prev=2,e.next=5,v("/api/presets/".concat(t,"/patchPurchases"),"POST",n);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Create Preset"),r(Object(s.a)(Object(s.a)({},a),{},{owner:l})),e.prev=2,t="Bearer ".concat(i),e.next=6,v("/api/presets","POST",a,{Authorization:t});case 6:u("\u041f\u0440\u0435\u0441\u0435\u0442 \u0443\u0441\u043f\u0435\u0448\u043e \u0441\u043e\u0437\u0434\u0430\u043d!"),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return{preset:a,loadPreset:x,patchPreset:j,bindTitle:{value:a.title,onChange:function(e){r(Object(s.a)(Object(s.a)({},a),{},{title:e.target.value}))}},createHandler:y,patchPresetGoods:k,loading:b}},oe=Object(C.a)({formControl:{minWidth:700},titleField:{marginTop:14},sublimeButton:{marginTop:10,background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 30px"},card:{marginTop:14},title:{marginTop:14,textAlign:"center",fontSize:45}}),ie=function(){var e=oe(),t=le(),a=t.preset,n=t.bindTitle,c=t.createHandler;return r.a.createElement("div",null,r.a.createElement(h.a,{className:e.card},r.a.createElement(O.a,{container:!0,spacing:3,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement("div",{className:e.title},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u0440\u0435\u0441\u0435\u0442\u0430")),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(x.a,{className:e.formControl},r.a.createElement(k.a,Object.assign({className:e.titleField},n,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0435\u0441\u0435\u0442\u0430",type:"text"})),r.a.createElement(y.a,{className:e.sublimeButton,onClick:c},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement("pre",null,JSON.stringify(a,null,2))))))},ue=a(141),se=a(125),me=a(138),pe=a(132),de=Object(C.a)({formControl:{minWidth:700},titleField:{marginTop:14},sublimeButton:{marginTop:10,background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 30px"},card:{marginLeft:7,marginRight:7,minWidth:320},title:{marginTop:14,textAlign:"center",fontSize:45},box:{marginTop:9,marginBottom:14,width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"start"}}),be={PaperProps:{style:{maxHeight:224,width:250}}},fe=function(){var e=de(),t=g(),a=(t.error,t.request),c=(t.clearError,Object(n.useContext)(f).token),l=E(),i=Object(u.h)().id,s=le(),m=s.preset,b=s.loadPreset,C=s.patchPresetGoods,S=s.loading,N=Object(n.useState)([]),T=Object(o.a)(N,2),P=T[0],B=T[1],I=Object(n.useState)([]),F=Object(o.a)(I,2),z=F[0],_=F[1],R=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="Bearer ".concat(c),console.log("Auth Str:",t),e.next=5,a("/api/goods","GET",null,{Authorization:t});case 5:n=e.sent,l("\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"),console.log("Data:",n),B(n),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])}))),[a,l]);if(Object(n.useEffect)((function(){b(i),R()}),[b]),Object(n.useEffect)((function(){console.log("erereer"),_(m.purchases.map((function(e){return e.good})))}),[m]),S)return r.a.createElement(w,null);var W=m.purchases.map((function(t){return r.a.createElement(A.a,{className:e.card,key:t._id},r.a.createElement($,{good:t.good}))}));return r.a.createElement(h.a,{className:e.card},r.a.createElement(O.a,{container:!0,spacing:3,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement("div",{className:e.title},"Preset Detail")),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(k.a,{className:e.titleField,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0435\u0441\u0435\u0442\u0430",value:m.title}),r.a.createElement(x.a,{className:e.formControl},r.a.createElement(ue.a,null,"Tag"),r.a.createElement(j.a,{multiple:!0,value:z,onChange:function(e){_(e.target.value)},input:r.a.createElement(se.a,null),renderValue:function(e){return e.map((function(e){return e.product.title})).join(", ")},MenuProps:be},P.map((function(e){return r.a.createElement(v.a,{key:e._id,value:e},r.a.createElement(me.a,{checked:z.map((function(e){return e._id})).includes(e._id)}),r.a.createElement(pe.a,{primary:"".concat(e.product.title," \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ").concat(e.amount," ").concat(e.product.unitOfMeasure)}))}))),r.a.createElement(y.a,{className:e.sublimeButton,onClick:function(){return C(i,z)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b \u0432 \u043f\u0440\u0435\u0441\u0435\u0442"))),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(A.a,{className:e.box},W))))},Ee=Object(C.a)({formControl:{minWidth:700},amountField:{marginTop:14},sublimeButton:{marginTop:10,background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 30px"},card:{marginTop:14},title:{marginTop:14,textAlign:"center",fontSize:45}}),ge=function(){var e=Ee(),t=V(),a=t.basket,n=t.bindTitle,c=t.createBasket;return r.a.createElement("div",null,r.a.createElement(h.a,{className:e.card},r.a.createElement(O.a,{container:!0,spacing:3,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement("div",{className:e.title},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u043e\u0440\u0437\u0438\u043d\u044b")),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(x.a,{className:e.formControl},r.a.createElement(k.a,Object.assign({className:e.amountField},n,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0440\u0437\u0438\u043d\u044b",type:"text"})),r.a.createElement(y.a,{className:e.sublimeButton,onClick:c},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement("pre",null,JSON.stringify(a,null,2))))))},ve=a(133),he=a(134),Oe=a(131),xe=function(){var e=Object(u.g)(),t=Object(n.useContext)(f),a=Object(n.useContext)(q).basketId,c=r.a.createElement("div",null,a?r.a.createElement(i.c,{to:"/basket/".concat(a)},"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043e\u0440\u0437\u0438\u043d\u0430: ",a):"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043e\u0440\u0437\u0438\u043d\u0430: \u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430");return r.a.createElement("nav",null,r.a.createElement(ve.a,{position:"static"},r.a.createElement(he.a,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(Oe.a,null,"SHOP LIST"),r.a.createElement(i.c,{to:"/create"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440"),r.a.createElement(i.c,{to:"/create-product"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0442"),r.a.createElement(i.c,{to:"/create-preset"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0441\u0435\u0442"),r.a.createElement(i.c,{to:"/create-basket"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),r.a.createElement(i.c,{to:"/products"},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432"),r.a.createElement(i.c,{to:"/goods"},"\u0422\u043e\u0432\u0430\u0440\u044b"),r.a.createElement(i.c,{to:"/presets"},"\u041f\u0440\u0435\u0441\u0435\u0442\u044b"),r.a.createElement(i.c,{to:"/baskets"},"\u041a\u043e\u0440\u0437\u0438\u043d\u044b"),c,r.a.createElement(y.a,{onClick:function(a){a.preventDefault(),t.logout(),e.push("/")}},"\u0412\u044b\u0439\u0442\u0438"))))},je=a(135);function ke(){var e=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(n.useCallback)((function(e,t){r(e),u(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),m=Object(n.useCallback)((function(){r(null),u(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&s(e.token,e.userId)}),[s]),{login:s,logout:m,token:a,userId:i}}(),t=e.token,a=e.login,c=e.logout,l=e.userId,s=!!t,m=function(e){return e?r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/create",exact:!0},r.a.createElement(N,null)),r.a.createElement(u.b,{path:"/products",exact:!0},r.a.createElement(W,null)),r.a.createElement(u.b,{path:"/create-product",exact:!0},r.a.createElement(ne,null)),r.a.createElement(u.b,{path:"/product/:id"},r.a.createElement(G,null)),r.a.createElement(u.b,{path:"/baskets",exact:!0},r.a.createElement(L,null)),r.a.createElement(u.b,{path:"/create-basket"},r.a.createElement(ge,null)),r.a.createElement(u.b,{path:"/basket/:id"},r.a.createElement(Z,null)),r.a.createElement(u.b,{path:"/goods",exact:!0},r.a.createElement(te,null)),r.a.createElement(u.b,{path:"/presets",exact:!0},r.a.createElement(ce,null)),r.a.createElement(u.b,{path:"/create-preset",exact:!0},r.a.createElement(ie,null)),r.a.createElement(u.b,{path:"/preset/:id"},r.a.createElement(fe,null)),r.a.createElement(u.a,{to:"/baskets"})):r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0},r.a.createElement(F,null)),r.a.createElement(u.a,{to:"/"}))}(s),p=Object(n.useState)(null),d=Object(o.a)(p,2),b=d[0],E=d[1];return r.a.createElement(f.Provider,{value:{token:t,login:a,logout:c,userId:l,isAuthenticated:s}},r.a.createElement(q.Provider,{value:{basketId:b,setBasketId:E}},r.a.createElement(i.a,null,s&&r.a.createElement(xe,null),r.a.createElement(je.a,null,m))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[76,1,2]]]);
//# sourceMappingURL=main.32a0e164.chunk.js.map